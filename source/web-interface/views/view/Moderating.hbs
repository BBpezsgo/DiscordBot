<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="pragma" content="no-cache">
    <link href="/styles/css-vars.css" rel="stylesheet" type="text/css">
    <link href="/styles/css_main.css" rel="stylesheet" type="text/css">
    <link href="/styles/tree.css" rel="stylesheet" type="text/css">
    <script language="javascript" src="/scripts/commonNew.js" type="text/javascript"></script>
    <script language="javascript" src="/scripts/tree.js" type="text/javascript"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <style>
        .material-icons {
            font-size: 1.2em;
            transform: translate(0px, 3px);
            user-select: none;
        }

        a:hover .material-icons::after {
            content: '';
            display: block;
            width: 1em;
            height: 1px;
            background-color: currentColor;
            transform: translateY(-2px);
        }

        img.badge {
            display: inline-block;
            transform: translateY(4px);
        }

        .channel-menuitem:not(.channel-menuitem-selected) .btn-view-channel {
            opacity: 0%;
        }

        .channel-menuitem:not(.channel-menuitem-selected):hover .btn-view-channel {
            opacity: 50%;
        }

        .btn-view-channel {
            float: right;
            background-image: url('/images/settings.png');
            background-repeat: no-repeat;
            background-size: contain;
            background-position: center;
            min-width: 20px !important;
            background-color: unset !important;
            opacity: 50%;
        }

        .btn-view-channel:hover {
            opacity: 70% !important;
        }

        .btn-view-channel:active {
            opacity: 100% !important;
        }

        .caret::before {
            content: '>';
            color: currentColor;
            display: inline-block;
            position: relative;
            top: -2px;
            left: 4px;
            font-weight: 1000;
            transition: transform 200ms;
            transform-origin: 4px 9px;
        }

        .caret-down::before {
            content: '>' !important;
            transform: rotate(90deg);
        }
    </style>
</head>

<body onload="resize(this);" onresize="resize(this);" class="ctxpanel" marginwidth="0" marginheight="0">
	<div style="width: 250px;" id="context-menubar">
        <div id="server-panel">
            <style>
                #server-panel table, #server-panel tr, #server-panel td {
                    border: 0px;
                    margin: 0px;
                    padding: 0px;
                }
            </style>
            <table cellspacing="0" style="position: relative; top: 10px; left: 8px;">
                <tr>
                    <td style="user-select: none">
                        <img src="{{server.iconUrlSmall}}" width="32" height="32" style="border-radius: 16px; margin-right: 4px">
                    </td>
                    <td style="color: #f3f4f5; font-weight: 700; font-size: 14px;">
                        {{server.name}}
                    </td>
                </tr>
            </table>
        </div>
		<div id="context-menubar-content" style="overflow-x: hidden;">
            {{#each singleChannels}}
            <table class="channel-menuitem
            {{#if selected}}
            channel-menuitem-selected
            {{/if}}
            "
            {{#if selected}}
            {{else}}
            onclick="event.target.style.pointerEvents='none';event.target.style.opacity='50%'; document.getElementById('view-channel-{{this.id}}').querySelector('input[type=submit]').click()"
            {{/if}}>
                <tr>
                    <td style="width:24px">
                        <img src="/dcbot/images/{{this.typeUrl}}.png" width="24" height="24" title="{{this.typeText}}">
                    </td>
                    <td style="font-size: 14px; font-weight: 600;">
                        <span>{{this.name}}</span>
                    </td>
                    <td style="display: none;">
                        <form action="/dcbot/view/Moderating.html/Server/Search" method="post" id="view-channel-{{this.id}}"
                            style="margin: 0;"
                            onsubmit="this.style.pointerEvents='none'; this.style.opacity='20%'; setTimeout(() => {Reload()}, 1000);">
                            <input type="text" name="id" value="{{this.id}}">
                            <input type="submit" value="View">
                        </form>
                    </td>
                </tr>
            </table>
            {{/each}}
            {{#each groups}}
            <table class="channel-menuitem{{#if selected}} channel-menuitem-selected{{/if}}" style="cursor:unset" onclick="OnCaretClick('{{this.id}}')">
                <tr>
                    <td style="padding:0 2px;word-break:break-all; width: 16px;">
                        <div class="caret" style="pointer-events:none;" id="{{this.id}}"></div>
                    </td>
                    <td style="font-size: 14px; font-weight: 600;">
                        {{this.name}}
                    </td>
                    <td style="padding:0 2px;word-break:break-all">
                        <form action="/dcbot/view/Moderating.html/Server/Search" method="post"
                            style="margin: 0;"
                            onsubmit="this.style.pointerEvents='none'; this.style.opacity='20%'; setTimeout(() => {Reload()}, 1000);">
                            <input type="text" name="id" value="{{this.id}}" style="display: none;">
                            <input type="submit" value="" class="btn-view-channel">
                        </form>
                    </td>
                </tr>
            </table>
            {{#each channels}}
            <table class="channel-menuitem
            {{#if selected}}
            channel-menuitem-selected
            {{/if}}
            nested {{this.parentId}}"
            {{#if selected}}
            {{else}}
            onclick="event.target.style.pointerEvents='none';event.target.style.opacity='50%'; document.getElementById('view-channel-{{this.id}}').querySelector('input[type=submit]').click()"
            {{/if}}>
                <tr>
                    <td style="width:24px">
                        <img src="/dcbot/images/{{this.typeUrl}}.png" width="24" height="24" title="{{this.typeText}}">
                    </td>
                    <td style="font-size: 14px; font-weight: 600;">
                        <span>{{this.name}}</span>
                        {{#if nsfw}}<span class="tag">NSFW</span>{{/if}}
                        {{#if isAfk}}<span class="tag">AFK</span>{{/if}}
                    </td>
                    <td style="display: none;">
                        <form action="/dcbot/view/Moderating.html/Server/Search" method="post" style="margin: 0" id="view-channel-{{this.id}}"
                            onsubmit="this.style.pointerEvents='none'; this.style.opacity='20%'; setTimeout(() => {Reload()}, 1000);">
                            <input type="text" name="id" value="{{this.id}}" style="display: none;">
                            <input type="submit" value="View">
                        </form>
                    </td>
                </tr>
            </table>
            {{/each}}
            {{/each}}
		</div>
		<div id="bot-status-panel">
			<iframe src="/dcbot/BotStatusPanel" style="width:100%;height:100%;border:0px;"></iframe>
		</div>
	</div>
    <style>
        #content {
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow-y: unset;
            margin: 0px;
            padding: 0px;
        }

        #content > #messages-container {
	        flex: 1 1 100%;
            overflow-y: scroll;
        }

        #content > #channel-panel {
            box-shadow: #0008 0px 1px 1px;
            flex: 0 0 53px;
            overflow: hidden;
        }

        #content > #send-message {
            flex: 0 0 53px;
        }
    </style>
	<div id="content">
        <div id="channel-panel">
            <form action="/dcbot/view/Moderating.html/Server/Back" method="post"
                style="display: inline-block; margin-right: 20px;"
                onsubmit="this.style.pointerEvents='none'; this.style.opacity='20%'; setTimeout(() => {Reload()}, 1000);">
                <input type="submit" value="" class="btn-tool btn-tool-back">
            </form>

            <h1 style="display:inline-block">{{channel.name}}</h1>
        </div>

        <!--
        <div class="container loading-effect">
            <h2>
                <span style="color: #aaa">Channel</span>
                {{channel.name}}
                <span style="color: #aaa">in guild</span>
                <div class="tooltip" style="transform: translateY(10px);">
                    <img class="server-icon circle-32" src="{{server.iconUrlSmall}}" width="32" height="32" title="{{server.nameAcronym}}">
                    <span class="tooltiptext" style="font-weight: normal;">
                        <img src="{{server.iconUrlLarge}}" alt="Ennek a szervernek nincs ikonja">
                    </span>
                </div>
                {{server.name}}
            </h2>
            <table style="width: 100%;">
                <tbody>
                    <tr>
                        <td width="25%" class="Item">ID:</td>
                        <td colspan="2">
                            {{channel.id}}
                        </td>
                    </tr>
                    <tr class="hide-null-{{channel.topic}}">
                        <td width="25%" class="Item">Topic:</td>
                        <td colspan="2">
                            <p style="word-wrap: break-word; max-width: 300px; overflow: auto; line-break: anywhere;">
                                {{channel.topic}}
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td width="25%" class="Item">Created at:</td>
                        <td colspan="2">
                            {{channel.createdAt}}
                        </td>
                    </tr>
                    <tr class="hide-null-{{channel.memberCount}}">
                        <td width="25%" class="Item">Member count:</td>
                        <td colspan="2">
                            {{channel.memberCount}}
                        </td>
                    </tr>
                    <tr class="hide-null-{{channel.archived}}">
                        <td width="25%" class="Item">Archived:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.archived}}.png">
                        </td>
                    </tr>
                    <tr class="show-{{channel.archived}}">
                        <td width="25%" class="Item">Archived at:</td>
                        <td colspan="2">
                            {{channel.archivedAt}}
                        </td>
                    </tr>
                    <tr>
                        <td width="25%" class="Item">Deletable:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.deletable}}.png">
                        </td>
                    </tr>
                    <tr class="hide-null-{{channel.full}}">
                        <td width="25%" class="Item">Full:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.full}}.png">
                        </td>
                    </tr>
                    <tr class="hide-null-{{channel.invitable}}">
                        <td width="25%" class="Item">Invitable:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.invitable}}.png">
                        </td>
                    </tr>
                    <tr class="hide-null-{{channel.joinable}}">
                        <td width="25%" class="Item">Joinable:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.joinable}}.png">
                        </td>
                    </tr>
                    <tr class="hide-null-{{channel.locked}}">
                        <td width="25%" class="Item">Locked:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.locked}}.png">
                        </td>
                    </tr>
                    <tr>
                        <td width="25%" class="Item">Manageable:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.manageable}}.png">
                        </td>
                    </tr>
                    <tr class="hide-null-{{channel.messageCount}}">
                        <td width="25%" class="Item">Message count:</td>
                        <td colspan="2">
                            {{channel.messageCount}}
                        </td>
                    </tr>
                    <tr>
                        <td width="25%" class="Item">Nsfw:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.nsfw}}.png">
                        </td>
                    </tr>
                    <tr class="hide-null-{{channel.sendable}}">
                        <td width="25%" class="Item">Sendable:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.sendable}}.png">
                        </td>
                    </tr>
                    <tr class="hide-null-{{channel.speakable}}">
                        <td width="25%" class="Item">Speakable:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.speakable}}.png">
                        </td>
                    </tr>
                    <tr>
                        <td width="25%" class="Item">Type:</td>
                        <td colspan="2">
                            {{channel.type}}
                        </td>
                    </tr>
                    {{#if channel.unarchivable includeZero=true}}
                    <tr>
                        <td width="25%" class="Item">Unarchivable:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.unarchivable}}.png">
                        </td>
                    </tr>
                    {{/if}}
                    {{#if channel.userLimit includeZero=true}}
                    <tr>
                        <td width="25%" class="Item">User limit:</td>
                        <td colspan="2">
                            {{channel.userLimit}}
                        </td>
                    </tr>
                    {{/if}}
                    {{#if channel.videoQualityMode includeZero=true}}
                    <tr>
                        <td width="25%" class="Item">Video quality mode:</td>
                        <td colspan="2">
                            {{channel.videoQualityMode}}
                        </td>
                    </tr>
                    {{/if}}
                    <tr>
                        <td width="25%" class="Item">Viewable:</td>
                        <td colspan="2">
                            <img width="16" height="16" src="/images/bool-{{channel.viewable}}.png">
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        -->
        
        <form action="/Message/Fetch" method="post" style="margin: 0; display: inline-block;"
            onsubmit="
                event.preventDefault()
                Post('/Message/Fetch?id=' + document.getElementById('fetch-msg-id').value + '&channel={{channel.id}}', event, () => {Reload()}, 'fetch-msg-error')
            ">
            <input type="text" name="id" value="" id="fetch-msg-id" required minlength="18" maxlength="18">
            <input type="submit" value="Fetch">
        </form>
        <form action="/Message/FetchMore" method="post" style="margin: 0; display: inline-block;"
            onsubmit="
                event.preventDefault()
                Post('/Message/FetchMore?count=' + document.getElementById('fetch-count').value + '&channel={{channel.id}}', event, () => {Reload()}, 'fetch-msg-error')
            ">
            <input type="number" name="count" value="" id="fetch-count" required min="1" max="20">
            <input type="submit" value="Fetch More">
        </form>
        <!--
        <form action="/Message/Fetch" method="post" style="margin: 0; display: inline-block;"
            onsubmit="
                event.preventDefault()
                Post('/Message/Fetch?count=' + document.getElementById('fetch-msg-count').value + '&channel={{channel.id}}', event, () => {Reload()}, 'fetch-msg-error')
            ">
            <h4>By Count</h4>
            <input type="number" min="1" max="15" name="count" value="15" id="fetch-msg-count">
            <input type="submit" value="Fetch">
        </form>
        -->
        <p style="color: #b32d2d;" id="fetch-msg-error"></p>

        <style>
            .message-container {
                display: block;
                margin: 0px;
                margin-top: 16px;
                padding: 2px 8px;

                display: grid;
                grid-template-columns: 64px auto;
            }

            .message-container:hover {
                background-color: #2e3035;
            }

            .message-container .message-actions {
                display: inline-block;
                opacity: 0%;
                pointer-events: none;
                float: right;
                position: relative;
                top: -24px;
                border: 1px solid #27282b;
                background-color: #313338;
                border-radius: 5px;
                white-space: nowrap;
                direction: rtl;
                user-select: none;
                overflow: hidden;
            }

            .message-container:hover .message-actions {
                opacity: 100%;
                pointer-events: all;
            }

            .message-container .message-actions:hover {
                box-shadow: #0004 0px 2px 2px;
            }

            .message-container .message-actions > * {
                background-color: transparent;
                border-radius: unset;
                padding: 0px;
                width: 32px;
                height: 32px;
                min-width: unset;
                display: inline-block;
                transition-duration: unset;
            }
            .message-container .message-actions > *:hover {
                background-color: #37383e;
            }

            .message-container .message-actions > *:active {
                background-color: #3c3e43;
            }

            .message-container .message-actions > * > img {
                opacity: 50%;
            }

            .message-container .message-actions > *:hover > img {
                opacity: 70%;
            }

            .message-container .message-actions > *:active > img {
                opacity: 90%;
            }

            .message-container .message-actions > *:active > * {
                transform: translateY(1px);
            }
        </style>

        <div id="messages-container">
            <form action="/Message/FetchMoreSimple" method="post" style="margin: 0; display: inline-block; width: 100%; text-align: center;"
                onsubmit="
                    event.preventDefault()
                    Post('/Message/FetchMoreSimple?channel={{channel.id}}', event, () => { Reload() }, 'fetch-msg-error-2')
                ">
                <input type="submit" value="Load More Messages" class="button-secondary">
            </form>
            <p style="color: #b32d2d;" id="fetch-msg-error-2"></p>

            <script>
                function ToggleAttachment(id) {
                    const attachment = document.getElementById('msg-attachment-' + id)
                    if (attachment.style.display === 'none') {
                        attachment.style.display = 'block'
                    } else {
                        const videoElement = attachment.querySelector('video')
                        if (videoElement) {
                            videoElement.pause()
                        }
                        attachment.style.display = 'none'
                    }
                }
            </script>
            
            <style>
                .text-spoiler {
                    border-radius: 3px;
                    background-color: #46484c;
                    transition: color 200ms, background-color 200ms;
                }
                .text-spoiler.text-spoiler-hidden {
                    color: transparent;
                    user-select: none;
                    cursor: pointer;
                    background-color: #1e1f22;
                }
                .text-spoiler.text-spoiler-hidden:hover {
                    background-color: #212226;
                }

                .text-content-block {
                    border: none;
                    border-left: 4px solid #4e5058;
                    padding-left: 10px;
                }

                .text-content-smallcode {
                    background-color: #1e1f22;
                    border-radius: 2px;
                    font-family: monospace;
                    font-weight: 600;
                    padding: 1px 2px;
                }
            </style>

            <style>
                .reaction-container {
                    user-select: none;
                }
                .reaction-container>.reaction {
                    display: inline-block;
                    height: 24px;
                    min-width: 40px;
                    background-color: #2b2d31;
                    border-radius: 8px;
                    padding: 3px;
                    margin-top: 8px;
                    margin-right: 2px;
                }
                .reaction-container>.reaction>img {
                    display: inline-block;
                    margin-left: 2px;
                }
                .reaction-container>.reaction>span:first-child:not(:last-child) {
                    display: inline-block;
                    margin-left: 2px;
                    width: 16px;
                    height: 16px;
                }
                .reaction-container>.reaction>span:last-child {
                    font-weight: bolder;
                    float: right;
                    padding-right: 6px;
                }

                .reaction-container>.reaction-me {
                    background-color: #373a54;
                    outline: 1px solid #5865f2;
                }
            </style>

            <style>
                .embed-container>.embed {
                    background-color: #2b2d31;
                    border-radius: 3px;
                    display: block;
                    padding: 12px;
                    border: none;
                    border-left: 4px solid #1e1f22;
                    max-width: 60%;
                    margin-top: 8px;
                }

                .embed-container>.embed>.embed-title {
                    font-size: 16px;
                    text-decoration: none;
                    cursor: default;
                    color: #fff;
                    font-weight: bold;
                }

                .embed-container>.embed>.embed-title.embed-title-link {
                    text-decoration: underline;
                    cursor: pointer;
                    color: var(--primary);
                }

                .embed-container>.embed>.embed-author>a {
                    font-size: 14px;
                    font-weight: bold;
                    position: relative;
                    top: -6px;
                    text-decoration: none;
                    cursor: default;
                    color: #fff;
                }
                
                .embed-container>.embed>.embed-author>a:link {
                    text-decoration: underline;
                    cursor: pointer;
                }
                
                .embed-container>.embed>.embed-author>img {
                    display: inline-block;
                    width: 24px;
                    height: 24px;
                    border-radius: 50%;
                    margin-right: 8px;
                }

                .embed-container>.embed>.embed-thumbnail {
                    float: right;
                    border-radius: 6px;
                }
                
                .embed-container>.embed>.embed-image {
                    border-radius: 4px;
                    max-width: 100%;
                }
                
                .embed-container>.embed>.embed-footer {
                    font-size: 12px;
                }
                
                .embed-container>.embed>.embed-field-container {
                    display: block;
                }
                
                .embed-container>.embed>.embed-field-container>.embed-field {
                    display: block;
                    margin: 8px 8px 8px 0px;
                }
                
                .embed-container>.embed>.embed-field-container>.embed-field>.embed-field-name {
                    display: block;
                    font-weight: bold;
                    font-size: 13px;
                }
            </style>

            <style>
                .message-container .tag {
                    font-size: 9px;
                    padding: 1px 5px;
                    font-weight: 600;
                }
            </style>

            {{#each messages}}
            <div class="message-container">
                {{#if types.ChannelPinnedMessage}}
                <div>
                    <img src="{{author.avatarUrlBig}}" width="42" height="42" title="Avatar" style="border-radius: 50%;">
                </div>

                <div>
                    <div class="message-actions">
                        {{#if deletable}}
                        <button onclick="Post('/Message/Delete?id={{id}}&channel={{../channel.id}}', event, () => { setTimeout(() => { Reload() }, 200) })">
                            <img src="/images/delete.png" title="Delete">
                        </button>
                        {{/if}}
                        <button onclick="document.getElementById('message-link-{{id}}').click()">
                            <img src="/images/link.png" title="Message Link">
                        </button>
                        <a href="{{url}}" style="display:none" target="_blank" title="Link" id="message-link-{{id}}"></a>
                    </div>
                    <div>
                        <span class="tooltiptext" style="font-weight:bold;font-size:16px;">{{author.username}}</span>
                        {{#if system}}<span class="tag">System</span>{{/if}}
                        {{#if crosspostable}}<span class="tag">Crosspostable</span>{{/if}}
                        <span>{{this.createdAt}}</span>
                        {{#if pinned}}
                        <span class="user-badge">
                            <img src="/images/pinned.png" title="Pinned">
                        </span>
                        {{/if}}
                    </div>
                    <div>
                        <span>{{author.username}} pinned a message</span>
                    </div>
                </div>

                {{else}}
                <div>
                    <img src="{{author.avatarUrlBig}}" width="42" height="42" title="Avatar" style="border-radius: 50%;">
                </div>
                <div>
                    <div class="message-actions">
                        {{#if deletable}}
                        <button onclick="Post('/Message/Delete?id={{id}}&channel={{../channel.id}}', event, () => { setTimeout(() => { Reload() }, 200) })">
                            <img src="/images/delete.png" title="Delete">
                        </button>
                        {{/if}}
                        {{#if pinned}}
                        <button onclick="Post('/Message/Unpin?id={{id}}&channel={{../channel.id}}', event, () => { setTimeout(() => { Reload() }, 200) })">
                            <img src="/images/pinned.png" title="Unpin">
                        </button>
                        {{else}}
                        {{#if pinnable}}
                        <button onclick="Post('/Message/Pin?id={{id}}&channel={{../channel.id}}', event, () => { setTimeout(() => { Reload() }, 200) })">
                            <img src="/images/pin.png" title="Pin">
                        </button>
                        {{/if}}
                        {{/if}}
                        <button onclick="document.getElementById('message-link-{{id}}').click()">
                            <img src="/images/link.png" title="Message Link">
                        </button>
                        <a href="{{url}}" style="display:none" target="_blank" title="Link" id="message-link-{{id}}"></a>
                    </div>
                    <div>
                        <span class="tooltiptext" style="font-weight:bold;font-size:16px;">{{author.username}}</span>
                        {{#if system}}<span class="tag">System</span>{{/if}}
                        {{#if author.bot}}<span class="tag">BOT</span>{{/if}}
                        {{#if crosspostable}}<span class="tag">Crosspostable</span>{{/if}}
                        <span style="color:#aaa; cursor: default;">{{this.createdAt}}</span>
                        {{#if pinned}}
                        <span class="user-badge">
                            <img src="/images/pinned.png" title="Pinned">
                        </span>
                        {{/if}}
                    </div>
                    <div>
                        {{#with this.content}}{{> content}}{{/with}}

                        {{#each this.attachments}}
                        <!--<span class="message-attachment" onclick="ToggleAttachment('{{this.id}}')"><i class="material-icons">insert_drive_file</i>Attachment</span>-->
                        <div id="msg-attachment-{{this.id}}" style="display:block;">
                            {{#switch this.contentType}}
                                {{#case 'image/jpeg'}}
                                <img src="{{this.url}}"height="{{this.height}}" style="display: block; max-height: 256px; border-radius: 8px; margin: 4px 0px 0px 0px;">
                                {{/case}}

                                {{#case 'video/mp4'}}
                                <video src="{{this.url}}" height="{{this.height}}" style="display: block; max-height: 256px; border-radius: 8px; margin: 4px 0px 0px 0px;" controls>
                                {{/case}}

                                {{#casedefault}}
                                <span>{{this.contentType}}</span>
                                {{/casedefault}}
                            {{/switch}}
                            <a href="{{this.url}}" target="_blank"><i class="material-icons">open_in_new</i></a>
                        </div>
                        {{/each}}
                    </div>

                    <div class="embed-container">
                        {{#each embeds}}
                        <div class="embed" style="{{#if this.color}}border-left-color:{{this.color}};{{/if}}{{#if this.thumbnail.url}}min-height:130px;{{/if}}">
                            {{#if this.thumbnail.url}}
                            <img src="{{this.thumbnail.url}}" height="100" class="embed-thumbnail">
                            {{/if}}
                            {{#if this.author}}
                            <div class="embed-author">
                                <img src="{{this.author.iconURL}}">
                                <a{{#if this.author.url}} href="{{this.author.url}}"{{/if}} target="_blank">
                                    {{this.author.name}}
                                </a>
                            </div>
                            {{/if}}
                            <a{{#if this.url}} href="{{this.url}}"{{/if}} target="_blank" class="embed-title {{#if this.url}}embed-title-link{{/if}}">
                                {{#with this.title}}{{> content}}{{/with}}
                            </a>
                            <p class="embed-description">
                                {{#with this.description}}{{> content}}{{/with}}
                            </p>
                            <div class="embed-field-container">
                                {{#each this.fields}}
                                <div class="embed-field"{{#if this.inline}} style="display:inline-block"{{/if}}>
                                    <div class="embed-field-name">
                                        {{#with this.name}}{{> content}}{{/with}}
                                    </div>
                                    <div class="embed-field-value">
                                        {{#with this.value}}{{> content}}{{/with}}
                                    </div>
                                </div>
                                {{/each}}
                            </div>
                            {{#if this.image}}
                            <img src="{{this.image.url}}" class="embed-image">
                            {{/if}}
                            <div class="embed-footer">
                                {{this.footer.text}}
                            </div>
                        </div>
                        {{/each}}
                    </div>

                    <div class="reaction-container">
                        {{#each reactions}}
                        <div class="reaction{{#if me}}reaction-me{{/if}}"{{#if this.url}}{{else}} style="position:relative;top:-2px"{{/if}}>
                            {{#if this.url}}
                            <img src="{{this.url}}" width="16" height="16">
                            {{else}}
                            <span>{{this.name}}</span>
                            {{/if}}
                            <span>{{this.count}}</span>
                        </div>
                        {{/each}}
                    </div>
                </div>
                {{/if}}
            </div>
            {{/each}}
        </div>

        <script>
            window.addEventListener('DOMContentLoaded', () => {
                if (window.location.href.includes('#noReload')) { return }
                const objDiv = document.getElementById("messages-container")
                objDiv.scrollTop = objDiv.scrollHeight
            })
        </script>
        
        <style>
            div#send-message {
                padding: 16px;
            }

            div#send-message > form {
                background-color: #383a40;
                border-radius: 8px;
                padding: 4px;
            }

            div#send-message > form textarea {
                background-color: #383a40;
                display: inline-block;
                border: none;
                font-size: 16px;
                font-family: "Arial", "Helvetica", "Geneva", "Swiss", "SunSans-Regular", "sans-serif";
            }

            div#send-message > form textarea:focus {
                outline: none;
            }
        </style>
        <div id="send-message">
            <form action="/Message/Send" method="post"
                onsubmit="this.style.pointerEvents='none'; this.style.opacity='20%';">
                <input type="text" name="channel" value="{{channel.id}}" style="display: none;">
                <input type="checkbox" id="tts" name="tts" value="tts" style="display:none">

                <table>
                    <tbody>
                        <tr>
                            <td style="width:100%">
                                <textarea name="content" rows="2" cols="30" maxlength="2000" placeholder="Message {{channel.name}}" required></textarea><br>
                            </td>
                            <td>
                                <input type="reset" value="Reset">
                            </td>
                            <td>
                                <input type="submit" value="Send">
                            </td>
                        </tr>
                    </tbody>
                </table>

                <p style="color: #f00" id="send-message-error"></p>
            </form>
        </div>
	</div>
    
    <script src="/scripts/functions.js"></script>
    <script>function Reload(){if(location.href.includes('#noReload')){location.reload()}else{location.href+='#noReload';location.reload()};}</script>
    <script src="/scripts/loadEffect.js"></script>
</body>

</html>